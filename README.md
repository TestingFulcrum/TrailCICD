# TrailCICD

Testing PR trigger

# Github CICD

name: greetings coder

on:
 pr:
   branches:
    - *

jobs:
  welcome_coder:
    runs-on: ubuntu-latest
    steps:
     -name: "greetings_message"
      run: "echo 'Welcome code owner"


https://github.com/marketplace/actions/project-template-action

Issue-message:
Pr-message:
GitHub-token:


Permissions

https://docs.github.com/en/actions/reference/workflows-and-actions/events-that-trigger-workflows#pull_request


# INTRO

STEPS can be run only in sequence
JOBS can be run in parallel or sequence

Workflows should have inside the same folder and not in subfolders


Jobs: jobs key word
job_id: used just fir identifier

Runs-on: decide to run on which agent
Steps: 
  Name: (Optional)
  Uses: (Optional)
  

Global variables can be defined for a job . To all the steps in a job


Dependency between steps are shared within a job and also across different jobs


Configure: with input, outputs, and environment variables

Dockerhub actions

Try to use GitHub official actions, for other ensure the integrity and check the version that you are planning to use.

There are actions available in GitHub marketplace generated by Pictet


https://github.com/matleclaire/gh-actions-example. 


# EVENTS

: Manual triggers
  External Manual triggers
Scheduled triggers
Repository Events



One action gate runner  to trigger bamboo 
As as of now possible to call argocd param updater from GitHub cloud.
Once we have GitHub on premises, this will be possible



# Gollum - GitHub wiki integrated in to a repository



# Triggering options:
Push
pull_request
Schedule
workflow_dispathc
Repossitory_dispatch
workflow_run




# Runners: Compute/OS that workflow will run on

2 types of Github hosted
Self hosted runners. - GitHub actions runners
   Default labels: self-hosted , linux , windows, macOs, x64, ARM, ARM64
   Custom labels: example: gpu

 Runs-on: (can have combination of group + labels )
   Group: ubuntu-runners
   Labels: ubuntu—*force

Self-hosted agent can be assigned to the project to make it run 1 job at a time just like assigning a dedicated bamboo agent to the project
     To be checked with EDO (software factory team) 

Variables can be modified and shared to the following jobs or workflows




# Workflow commands:https://docs.github.com/en/actions/reference/workflows-and-actions/workflow-commands#environment-files 

Set env vars. :  $GITHUB_OUTPUT across jobs and workflows
                          $GITHUB_ENV within all the steps in that job 
Adding to System path

Set output parameters $ steps.example_step.outputs.result 
                                           Needs.job1.output.resukt




# Toolkit
 ::debug::
 ::error::
 ::add-mask::



# Workflow Context:

GitHub
Env
Vars
Jobs
Steps
Runner
Secret
Needs
Inputs
Matrix 
Strategy

# Conditional execution of context: https://github.com/TestingFulcrum/gh-actions-example/blob/main/.github/__TEMPLATES/workflows/ci-workflow-exercise.yml 

GitHub.ref.ref_name startsWith() main


    if: startsWith(github.ref, 'refs/heads/main') || startsWith(github.ref, 'refs/heads/feature/') || startsWith(github.ref, 'refs/heads/bugfix/')


# Configuring variables:

Env : to use in single workflow
          Can be used within a particular job step or the workflow itself
         Override environment variables allowed but not the default env variables

Context: Organisational , Repo, Environmental variables

   If same variable name is at multiple levels, then the lowest level takes the precedence

# Configuring Secrets: 
    Secrets is in different context , not in the same context as variables
          

    $  secrets. 
    Secrets.LARGE_SECRET_PASSPHRASE
    CERTIFICATES_BASE64
    https://docs.github.com/en/actions/how-tos/write-workflows/choose-what-workflows-do/use-secrets 

 # GITHUB TOKEN:


 # SHARE AUTOMATIONS:
   ACTION A: DOCKER ACTIONS
   ACTION B: JAVA SCRIPT ACTIONS
   ACTION C: COMPOSITE ACTIONS

    Define a custom action in action.yml inside .github/actions

Publish your action - push to use across your repos

  # RESUSE WORKFLOWS
   Calling 1 workflow from another workflow
   workflow_call:
   calling_reusable:

   Feature  Resusablw workflow Compoisite action
    Scope    entire workflow    A group of steps within a job
    containts jobs? yes         no
    log visibility   Every job logged individually   



    limitations
      4 levels on caller
      no env but pass inputs


    
    